<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TDS Management</title>
  <style>
    /* Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: Arial, sans-serif;
      background: #2e2e2e;
      color: #fff;
      display: flex;
      height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 220px;
      background: #242424;
      padding: 20px 10px;
      display: flex;
      flex-direction: column;
    }

    .sidebar h2 {
      color: #fff;
      font-size: 22px;
      margin-bottom: 30px;
      text-align: center;
    }

    .nav-item {
      padding: 12px 15px;
      margin: 5px 0;
      border-radius: 5px;
      cursor: pointer;
      color: #ccc;
      transition: background 0.3s, color 0.3s;
    }

    .nav-item:hover,
    .nav-item.active {
      background: #555;
      color: #fff;
    }

    /* Main content */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #3a3a3a;
    }

    .topbar {
      background: #242424;
      padding: 15px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      font-size: 14px;
    }

    .topbar span {
      margin-left: 15px;
      cursor: pointer;
    }

    .content {
      flex: 1;
      padding: 20px;
    }

    .card {
      background: #2b2b2b;
      border-radius: 10px;
      padding: 20px;
      min-height: 70vh;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      gap: 12px;
      flex-wrap: wrap;
    }

    .card-header h3 {
      font-size: 22px;
    }

    .btn {
      background: #555;
      color: #fff;
      padding: 10px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn:hover { background: #777; }

    ul { list-style: none; }
    li { margin: 8px 0; }

    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #262626;
      padding: 10px 12px;
      border-radius: 6px;
    }
    .row-actions { display: inline-flex; gap: 8px; }
    .input {
      background: #1f1f1f;
      color: #fff;
      border: 1px solid #444;
      border-radius: 6px;
      padding: 10px 12px;
      min-width: 220px;
    }
    .muted { color: #bbb; }

    /* Responsive layout */
    @media (max-width: 768px) {
      body { flex-direction: column; }

      .sidebar {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
      }

      .nav-item {
        flex: 1;
        text-align: center;
        font-size: 14px;
      }

      .main { flex: 1; }
      .input { min-width: 0; width: 100%; }
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>TDS</h2>
    <div class="nav-item active" data-section="drivers">Drivers</div>
    <div class="nav-item" data-section="trucks">Trucks</div>
    <div class="nav-item" data-section="deliveries">Deliveries</div>
    <div class="nav-item" data-section="history">History Reports</div>
  </div>

  <!-- Main Content -->
  <div class="main">
    <!-- Top Bar -->
    <div class="topbar">
      <span>First_Name</span>
      <span>Last_Name</span>
      <span>Logout</span>
    </div>

    <!-- Content Area -->
    <div class="content">
      <!-- Drivers Section -->
      <div id="drivers" class="card section">
        <div class="card-header">
          <h3>Drivers Management</h3>
          <form id="driversForm" aria-label="Add driver">
            <label for="driversInput" style="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;padding:0;margin:-1px;">Driver name</label>
            <input id="driversInput" class="input" type="text" placeholder="Enter driver name" required />
            <button class="btn" type="submit">+ Add Driver</button>
          </form>
        </div>
        <div id="driversList"></div>
      </div>

      <!-- Trucks Section -->
      <div id="trucks" class="card section" style="display:none;">
        <div class="card-header">
          <h3>Trucks Management</h3>
          <form id="trucksForm" aria-label="Add truck">
            <label for="trucksInput" style="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;padding:0;margin:-1px;">Truck name</label>
            <input id="trucksInput" class="input" type="text" placeholder="Enter truck name" required />
            <button class="btn" type="submit">+ Add Truck</button>
          </form>
        </div>
        <div id="trucksList"></div>
      </div>

      <!-- Deliveries Section -->
      <div id="deliveries" class="card section" style="display:none;">
        <div class="card-header">
          <h3>Deliveries Management</h3>
          <form id="deliveriesForm" aria-label="Add delivery">
            <label for="deliveriesInput" style="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;padding:0;margin:-1px;">Delivery name</label>
            <input id="deliveriesInput" class="input" type="text" placeholder="Enter delivery name" required />
            <button class="btn" type="submit">+ Add Delivery</button>
          </form>
        </div>
        <div id="deliveriesList"></div>
      </div>

      <!-- History Reports Section -->
      <div id="history" class="card section" style="display:none;">
        <div class="card-header">
          <h3>History Reports</h3>
        </div>
        <div id="historyList"><p class="muted">No reports available.</p></div>
      </div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = 'tds_data_v1';
    let data = loadData();

    function loadData() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        const parsed = raw ? JSON.parse(raw) : null;
        return parsed || { drivers: [], trucks: [], deliveries: [] };
      } catch (e) {
        return { drivers: [], trucks: [], deliveries: [] };
      }
    }

    function saveData() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function uuid() {
      return (crypto && crypto.randomUUID) ? crypto.randomUUID() : String(Date.now() + Math.random());
    }

    function addItem(type, name) {
      const trimmed = (name || '').trim();
      if (!trimmed) return;
      data[type].push({ id: uuid(), name: trimmed });
      saveData();
      renderList(type);
    }

    function removeItem(type, id) {
      data[type] = data[type].filter(i => i.id !== id);
      saveData();
      renderList(type);
    }

    function editItem(type, id, newName) {
      const item = data[type].find(i => i.id === id);
      if (!item) return;
      const trimmed = (newName || '').trim();
      if (!trimmed) return;
      item.name = trimmed;
      saveData();
      renderList(type);
    }

    function renderList(type) {
      const container = document.getElementById(type + 'List');
      container.innerHTML = '';
      if (!data[type].length) {
        const p = document.createElement('p');
        p.className = 'muted';
        p.textContent = `No ${type} added yet.`;
        container.appendChild(p);
        return;
      }
      const ul = document.createElement('ul');
      data[type].forEach(item => {
        const li = document.createElement('li');
        const row = document.createElement('div');
        row.className = 'row';

        const nameSpan = document.createElement('span');
        nameSpan.textContent = item.name;

        const actions = document.createElement('div');
        actions.className = 'row-actions';

        const editBtn = document.createElement('button');
        editBtn.type = 'button';
        editBtn.className = 'btn';
        editBtn.textContent = 'Edit';
        editBtn.addEventListener('click', () => {
          const next = prompt(`Edit ${type.slice(0, -1)} name:`, item.name);
          if (next !== null) editItem(type, item.id, next);
        });

        const delBtn = document.createElement('button');
        delBtn.type = 'button';
        delBtn.className = 'btn';
        delBtn.textContent = 'Delete';
        delBtn.addEventListener('click', () => removeItem(type, item.id));

        actions.appendChild(editBtn);
        actions.appendChild(delBtn);
        row.appendChild(nameSpan);
        row.appendChild(actions);
        li.appendChild(row);
        ul.appendChild(li);
      });
      container.appendChild(ul);
    }

    // Nav handling (no inline onclick)
    document.querySelectorAll('.nav-item').forEach(nav => {
      nav.addEventListener('click', () => {
        const section = nav.getAttribute('data-section');
        document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
        document.getElementById(section).style.display = 'block';
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        nav.classList.add('active');
      });
    });

    // Forms submission
    document.getElementById('driversForm').addEventListener('submit', e => {
      e.preventDefault();
      const input = document.getElementById('driversInput');
      addItem('drivers', input.value);
      input.value = '';
      input.focus();
    });
    document.getElementById('trucksForm').addEventListener('submit', e => {
      e.preventDefault();
      const input = document.getElementById('trucksInput');
      addItem('trucks', input.value);
      input.value = '';
      input.focus();
    });
    document.getElementById('deliveriesForm').addEventListener('submit', e => {
      e.preventDefault();
      const input = document.getElementById('deliveriesInput');
      addItem('deliveries', input.value);
      input.value = '';
      input.focus();
    });

    // Initial renders
    renderList('drivers');
    renderList('trucks');
    renderList('deliveries');
  </script>
</body>
</html>
